**Critical Constraints:**

1. âœ… **No tech stack limitation** â€” use whatever you want (we chose Next.js + Supabase)
2. âœ… **All-night coding allowed** â€” presentation at 12:00 PM (noon) tomorrow
3. âš ï¸ **ONLY documented features count** â€” if it's not in proposal.md, you get NO credit
4. âœ… **No boilerplate required** â€” build from scratch

**Timeline:**

- Day 1 (completed): Documentation phase (6:00 PM deadline âœ…)
- Day 2 (NOW): Build phase (8:00 PM start â†’ 12:00 PM presentation = 16 hours)

---

## âœ… DATABASE SETUP (COMPLETED)

**Platform:** Supabase (PostgreSQL)

**Tables Created:**

1. `rumors` â€” rumor submissions with trust_score and status
2. `evidence` â€” supporting/disputing evidence linked to rumors
3. `evidence_votes` â€” anonymous hash-based votes on evidence quality
4. `audit_log` â€” append-only audit trail for all score changes
5. `user_fingerprints` â€” behavioral tracking for bot detection

**Row-Level Security (RLS):**

- âœ… Read: Anyone (public feed)
- âœ… Insert: Authenticated users only
- âœ… Update: Service role only (score updates)
- âœ… Delete: Disabled (append-only for audit trail)

**Helper Functions:**

- `calculate_vote_weight(vote_count)` â€” implements log scaling: 1 + ln(n)
- `update_rumor_trust_score(rumor_uuid)` â€” Bayesian scoring engine

**Test Data:** âœ… Verified working (rumor â†’ evidence â†’ vote chain tested)

---

## ğŸ“‹ WHAT'S IN THE PROPOSAL (MUST BUILD THESE)

**Core Features (MVP):**

1. Anonymous rumor submission
2. Evidence submission (support/dispute with links/images/text)
3. Evidence voting (helpful/misleading)
4. Staking layer (users stake points for higher influence) âš ï¸ **DECIDE: Keep or simplify?**
5. Bayesian trust score updates (evidence-weighted)
6. Hash-based duplicate vote prevention (`SHA256(student_id + salt + evidence_id)`)
7. Log-scaled vote impact to cap mob influence (`weight = 1 + ln(n)`)
8. Append-only audit log for score changes
9. Basic bot flags (timing patterns + agreement correlation)
10. Rumor status system (Active/Verified/Debunked/Inconclusive)

**Stretch/Future Work (NOT required):**

- Full trust-graph anomaly detection
- DAG-based rumor deletion propagation
- Automated evidence credibility scoring
- AI duplicate detection

**AI Features (optional):**

- Rumor summarization (1-2 lines) â€” if time allows
- Toxicity warnings â€” if time allows

---

## ğŸ› ï¸ TECH STACK (CHOSEN)

**Frontend:** Next.js 14 (App Router) + TypeScript + Tailwind CSS
**Backend:** Next.js API Routes (no direct clientâ†’Supabase calls)
**Database:** Supabase (PostgreSQL with RLS)
**Auth:** Supabase Auth (anonymous hash-based voting)
**Deployment:** Vercel (free tier)
**AI (optional):** OpenAI API for summarization

---

## ğŸ¯ BUILD ORDER (Senior's Advice)

### âœ… Phase 1: Database (DONE)

- ERD created
- SQL migrations executed
- RLS policies configured
- Helper functions deployed

### ğŸ”„ Phase 2: Secure API Routes (NEXT â€” 2 hours)

```
POST /api/rumors/submit       â€” create new rumor
POST /api/evidence/submit     â€” attach evidence to rumor
POST /api/evidence/vote       â€” vote on evidence quality
GET  /api/rumors/feed         â€” get all rumors with scores
GET  /api/rumors/[id]         â€” get rumor details + evidence
```

**Key Security Practices:**

- NO direct Supabase calls from client
- Use service_role key server-side only
- Rate limiting on all POST endpoints
- Validate vote_hash uniqueness

### Phase 3: Bayesian Scoring Engine (1.5 hours)

- Trigger score updates on every evidence vote
- Apply log scaling to vote weights
- Update rumor status based on thresholds:
    - Verified: score â‰¥ 0.8
    - Debunked: score â‰¤ 0.2
    - Inconclusive: 0.4 â‰¤ score â‰¤ 0.6
    - Active: everything else
- Write to audit_log on every change

### Phase 4: Bot Detection (1 hour)

- Track vote timing patterns (flag if <2 sec between votes)
- Calculate agreement correlation (flag if >80% agreement with others)
- Auto-downweight suspicious votes (multiply weight by 0.5)

### Phase 5: Frontend UI (3 hours)

- `/` â€” Feed page (list all rumors with scores + status badges)
- `/rumor/[id]` â€” Detail page (evidence list + voting interface)
- `/submit` â€” Rumor submission form
- Components: RumorCard, EvidenceCard, VoteButton, StatusBadge

### Phase 6: Testing + Deploy (1 hour)

- End-to-end test: submit â†’ evidence â†’ vote â†’ score update
- Deploy to Vercel
- Test on mobile
- Prepare demo flow

---

## ğŸ”‘ CRITICAL TECHNICAL DETAILS

**Anonymous Voting System:**

```typescript
// Generate vote hash (client-side or server-side)
const voteHash = SHA256(studentId + SECRET_SALT + evidenceId);
```

**Assumptions (from proposal):**

- Salt is distributed once per event/semester (e.g., via registration)
- Salt is NOT stored alongside votes
- Users authenticate once but vote anonymously

**Bayesian Scoring Formula:**

```
support_weight = SUM(helpful_votes * log_weight) - SUM(misleading_votes * log_weight)
dispute_weight = SUM(helpful_votes * log_weight) - SUM(misleading_votes * log_weight)
new_score = support_weight / (support_weight + |dispute_weight|)
```

**Log Scaling:**

```
weight(n) = 1 + ln(n)
// Example: 1 vote = 1.0, 10 votes = 3.3, 100 votes = 5.6, 1000 votes = 7.9
```

---

## ğŸ“¦ DELIVERABLES (for presentation)

1. âœ… Complete project code (GitHub repo)
2. âœ… System design diagrams in Markdown (ERD + flowchart + architecture)
3. âœ… FYP-style report (proposal + approach + summary)
4. ğŸ”„ 5-slide pitch outline (Markdown bullets) â€” prepare during build
5. ğŸ”„ Demo-ready application (deployed on Vercel)

---

## ğŸš¨ BLOCKERS / DECISIONS NEEDED

**Decision 1: Staking System**

- Proposal mentions staking (users stake points for influence)
- This adds complexity: point system, stake tracking, loss mechanism
- **Options:**
    - A) Keep staking (risky, adds 2-3 hours)
    - B) Replace with reputation weights (simpler, faster)
- **Recommendation:** Replace with reputation (track vote accuracy, weight future votes)

**Decision 2: AI Features**

- Proposal lists AI summarization as MVP choice
- **Options:**
    - A) Build it (adds 30-45 min if using OpenAI API)
    - B) Skip it (focus on core trust mechanics)
- **Recommendation:** Skip for first pass, add if time remains

---

## ğŸ“ FILES REFERENCE

- `proposal.md` â€” Official submission (defines what gets graded)
- `approach.md` â€” Full technical specification
- `summary.md` â€” Quick reference version
- `context.md` â€” This file (build-phase context)

---

## â° TIME CHECK

**Current Time:** ~8:20 PM, Feb 6, 2026
**Presentation:** 12:00 PM (noon), Feb 7, 2026
**Time Remaining:** ~16 hours
**Recommended Sleep:** 4 hours (3:00 AM - 7:00 AM)
**Effective Build Time:** ~12 hours

---

## ğŸ¯ IMMEDIATE NEXT STEPS

1. Set up Next.js project: `npx create-next-app@latest rumor-verify --typescript --tailwind --app`
2. Install Supabase client: `npm install @supabase/supabase-js`
3. Create `.env.local` with Supabase credentials
4. Build API routes (Phase 2)
5. Build scoring engine (Phase 3)
6. Build UI (Phase 5)

**BUILD FAST. TEST OFTEN. DEPLOY EARLY.**
